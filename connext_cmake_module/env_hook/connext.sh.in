_DEFAULT_NDDSHOME="@Connext_HOME@"
_Connext_LIBRARY_DIR="@Connext_LIBRARY_DIR@"

# Give priority to the NDDSHOME environment variable because the one detected at build time may
# refer to an invalid path, e.g. for users using binaries.

# Warn about changing the Connext location
if [ ! -z "$NDDSHOME" -a "$NDDSHOME" != "$_DEFAULT_NDDSHOME" ]; then
  echo "NDDSHOME environment variable is set to \"$NDDSHOME\" but the one used at build time was" \
    "\"$_DEFAULT_NDDSHOME\"" 1>&2
fi

if [ -z "$NDDSHOME" ]; then
  echo "NDDSHOME environment variable not set. Using NDDSHOME that was detected when the" \
    "workspace was built: \"$_DEFAULT_NDDSHOME\"" 1>&2
  export NDDSHOME=$_DEFAULT_NDDSHOME
fi

# detect if running on Darwin platform
_UNAME=`uname -s`
_IS_DARWIN=0
if [ "$_UNAME" = "Darwin" ]; then
  _IS_DARWIN=1
fi
unset _UNAME

ament_prepend_unique_value PATH "$NDDSHOME/bin"

# add the libary dir on the (DY)LD_LIBRARY_PATH for the rtiddsgen tool
ament_prepend_unique_value PATH "$_Connext_LIBRARY_DIR"
if [ $_IS_DARWIN -eq 0 ]; then
  ament_prepend_unique_value LD_LIBRARY_PATH "$_Connext_LIBRARY_DIR"
else
  ament_prepend_unique_value DYLD_LIBRARY_PATH "$_Connext_LIBRARY_DIR"
fi
unset _IS_DARWIN

unset _Connext_LIBRARY_DIR
unset _DEFAULT_NDDSHOME
